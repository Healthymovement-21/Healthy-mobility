<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Healthy Mobility ‚Äì Home</title>

  <script defer data-domain="healthymovement-21.github.io" src="https://plausible.io/js/script.js"></script>
  <link rel="stylesheet" href="style.css?v=20260209">
</head>

<body>
  <!-- Intro Animation -->
  <div class="intro" id="intro">
    <div class="logo">
      <div class="shine"></div>
      <div><span>Healthy</span><br><span>Mobility</span></div>
    </div>
  </div>

  <!-- Home actions: Share icon ONLY on Home -->
  <div class="home-actions">
    <button class="icon-btn" id="shareBtn" type="button" aria-label="Teilen">
      <!-- iOS-like share icon -->
      <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M12 3v10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <path d="M8.5 6.5 12 3l3.5 3.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M6 13v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
      </svg>
    </button>
  </div>

  <!-- THEME: ALWAYS top-right -->
  <button class="theme-top" id="themeBtn" type="button" aria-label="Theme wechseln">üåó</button>

  <!-- Search overlay (opens from bottom search icon) -->
  <div class="overlay" id="searchOverlay" aria-hidden="true">
    <div class="overlay-panel">
      <div class="overlay-top">
        <input id="overlayInput" type="search" placeholder="Produkt suchen‚Ä¶" autocomplete="off">
        <button id="overlayClose" type="button">Schlie√üen</button>
      </div>
      <div class="suggest" id="suggestList"></div>
    </div>
  </div>

  <!-- Share menu (fallback if native share not available) -->
  <div class="menu" id="shareMenu" aria-hidden="true">
    <div class="backdrop" id="shareBackdrop"></div>
    <div class="sheet">
      <div class="muted" style="padding:8px 12px 10px;">Teilen</div>
      <button type="button" id="shareNative">Teilen‚Ä¶</button>
      <button type="button" id="shareWhats">WhatsApp</button>
      <button type="button" id="shareCopy">Link kopieren</button>
      <button type="button" id="shareClose">Schlie√üen</button>
    </div>
  </div>

  <main class="page">
    <h1>Ausgew√§hlte Produktempfehlungen aus der Physiotherapie</h1>

    <div class="card">
      <p>
        Auf dieser Seite findest du eine Auswahl an Produkten aus den Bereichen Bewegung,
        Regeneration, W√§rme, K√§lte, Stabilit√§t und unterst√ºtzendes Training.
        Die Produktauswahl basiert auf physiotherapeutischem Fachwissen,
        Erfahrungen aus dem Praxisalltag sowie R√ºckmeldungen von Patientinnen und Patienten.
      </p>

      <p>
        Die hier aufgef√ºhrten Produkte k√∂nnen eine physiotherapeutische Behandlung sinnvoll
        erg√§nzen und unterst√ºtzen. Sie ersetzen jedoch weder eine individuelle Therapie
        noch eine medizinische Diagnose oder Behandlung.
      </p>

      <p>
        Wichtig zu wissen: Nicht alle hier aufgef√ºhrten Produkte habe ich pers√∂nlich selbst getestet.
        Die Empfehlungen ergeben sich aus fachlicher Einsch√§tzung,
        bew√§hrten Anwendungen im therapeutischen Umfeld
        sowie aus Erfahrungen und R√ºckmeldungen anderer Anwender.
      </p>

      <p>
        Ob und welches Produkt sinnvoll ist, h√§ngt immer von der individuellen Situation,
        dem jeweiligen Beschwerdebild sowie den pers√∂nlichen Voraussetzungen ab.
        In bestimmten F√§llen kann es sinnvoll sein,
        vor der Anwendung noch einmal R√ºcksprache zu halten.
      </p>

      <p>
        Werbung / Affiliate-Links: Wenn du √ºber Links einkaufst, erhalte ich ggf. eine Provision.
        F√ºr dich entstehen keine zus√§tzlichen Kosten.
      </p>

      <div class="cta-row">
        <a class="cta" href="shop.html" onclick="track('nav_shop','home_cta')">Zum Shop ‚Üí</a>
      </div>
    </div>

    <div class="card" style="margin-top:18px;">
      <p>
        Tipp: Nutze Produkte nie nach dem Motto ‚Äûviel hilft viel‚Äú. Gerade bei W√§rme/K√§lte,
        Bandagen oder intensiver Selbstbehandlung gilt: dosiert, individuell und sinnvoll einsetzen.
        Wenn du dir unsicher bist, kl√§ren wir lieber kurz ab, was bei deiner Situation wirklich passt.
      </p>
      <p>
        Ziel ist nicht ‚Äûmehr kaufen‚Äú, sondern die passenden Tools zu haben, um Therapie, Training und Alltag
        besser zu unterst√ºtzen ‚Äì ohne unn√∂tigen Quatsch.
      </p>
    </div>

    <div class="card" style="margin-top:18px;">
      <p><strong>Beliebte Empfehlungen</strong></p>
      <p>
        Hier siehst du automatisch die Produkte, die am h√§ufigsten angeklickt wurden.
        (Die Klicks werden lokal im Browser gespeichert.)
      </p>
      <div id="popularList"></div>
    </div>

    <!-- Impressum/Datenschutz nur hier -->
    <div class="footer">
      <a href="impressum.html" onclick="track('nav_impressum','home_footer')">Impressum</a> ¬∑
      <a href="datenschutz.html" onclick="track('nav_datenschutz','home_footer')">Datenschutz</a>
      <div style="margin-top:10px;">Hinweis: Inhalte stellen keine medizinische Beratung dar.</div>
    </div>
  </main>

  <!-- Bottom Nav -->
  <div class="bottom-nav" role="navigation" aria-label="Bottom Navigation">
    <div class="bar">
      <button class="nav-btn active" type="button" onclick="go('index.html')">
        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M3 10.5L12 3l9 7.5V21a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1V10.5Z"
                stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
        </svg>
        <div style="font-size:11px;">Home</div>
      </button>

      <button class="nav-btn" type="button" onclick="go('shop.html')">
        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M6 8h12l-1 13H7L6 8Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
          <path d="M9 8a3 3 0 0 1 6 0" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <div style="font-size:11px;">Shop</div>
      </button>

      <!-- SEARCH opens overlay, not scroll -->
      <button class="nav-btn" type="button" id="openSearchBtn">
        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z" stroke="currentColor" stroke-width="2"/>
          <path d="M16.2 16.2 21 21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <div style="font-size:11px;">Suche</div>
      </button>
    </div>
  </div>

  <script>
    function track(eventName, label){
      try{ if (window.plausible) window.plausible(eventName, { props:{ label } }); }catch(e){}
    }
    function go(url){ window.location.href = url; }

    // Theme ALWAYS top-right
    const root = document.documentElement;
    const saved = localStorage.getItem("theme");
    if (saved) root.setAttribute("data-theme", saved);
    else {
      const prefersLight = window.matchMedia && window.matchMedia("(prefers-color-scheme: light)").matches;
      root.setAttribute("data-theme", prefersLight ? "light" : "dark");
    }
    document.getElementById("themeBtn").addEventListener("click", () => {
      const cur = root.getAttribute("data-theme") || "dark";
      const next = cur === "dark" ? "light" : "dark";
      root.setAttribute("data-theme", next);
      localStorage.setItem("theme", next);
      track("theme_toggle", next);
    });

    // Intro FIX: always disappears + failsafe remove
    const intro = document.getElementById("intro");
    const seen = sessionStorage.getItem("hm_intro_seen");
    if (seen){
      intro.remove();
    } else {
      sessionStorage.setItem("hm_intro_seen","1");
      setTimeout(()=> intro.classList.add("hide"), 1400);
      setTimeout(()=> { if (intro) intro.remove(); }, 2100);
      setTimeout(()=> { const x=document.getElementById("intro"); if (x) x.remove(); }, 3000); // failsafe
    }

    // Products catalog for overlay search
    const products = [
      { name:"Massagepistole", id:"massagepistole", price:"25,99 ‚Ç¨" },
      { name:"Moorkissen", id:"moorkissen", price:"29,89 ‚Ç¨" },
      { name:"Knie-K√ºhlpack", id:"knie-kuehlpack", price:"17,89 ‚Ç¨" },
      { name:"Retterspitz", id:"retterspitz", price:"26,14 ‚Ç¨" },
      { name:"MacDavid Bandage", id:"macdavid-bandage", price:"44,95 ‚Ç¨" },
      { name:"Leukotape", id:"leukotape", price:"9,99 ‚Ç¨" },
      { name:"Laufband", id:"laufband", price:"94,99 ‚Ç¨" },
      { name:"Thrombosestrumpf", id:"thrombosestrumpf", price:"26,90 ‚Ç¨" },
      { name:"W√§rmemessger√§t", id:"waermemessgeraet", price:"16,14 ‚Ç¨" },
      { name:"Aloe-Vera-Gel", id:"aloe-vera-gel", price:"6,30 ‚Ç¨" },
      { name:"Lymphma√üband", id:"lymphmassband", price:"20,09 ‚Ç¨" },
      { name:"Elektrischer Shaker", id:"elektrischer-shaker", price:"19,54 ‚Ç¨" },
      { name:"BAUERFEIND Fu√übandage", id:"bauerfeind-fussbandage", price:"47,43 ‚Ç¨" },
      { name:"BAUERFEIND Armbandage", id:"bauerfeind-armbandage", price:"35,20 ‚Ç¨" }
    ];

    // Overlay Search
    const overlay = document.getElementById("searchOverlay");
    const openSearchBtn = document.getElementById("openSearchBtn");
    const overlayInput = document.getElementById("overlayInput");
    const overlayClose = document.getElementById("overlayClose");
    const suggestList = document.getElementById("suggestList");

    function openOverlay(){
      overlay.classList.add("open");
      overlay.setAttribute("aria-hidden","false");
      overlayInput.value = "";
      renderSuggest("");
      setTimeout(()=> overlayInput.focus(), 50);
      track("search_overlay_open","home");
    }
    function closeOverlay(){
      overlay.classList.remove("open");
      overlay.setAttribute("aria-hidden","true");
      track("search_overlay_close","home");
    }
    function renderSuggest(q){
      const query = (q||"").trim().toLowerCase();
      const results = products
        .filter(p => !query || (p.name.toLowerCase().includes(query)))
        .slice(0, 10);

      if (results.length === 0){
        suggestList.innerHTML = `<div style="color:var(--muted);padding:10px 2px;">Keine Treffer.</div>`;
        return;
      }
      suggestList.innerHTML = results.map(p => `
        <a href="shop.html#${p.id}" onclick="track('search_select','${p.name}')">
          <span class="name">${p.name}</span>
          <span class="meta">${p.price}</span>
        </a>
      `).join("");
    }

    openSearchBtn.addEventListener("click", openOverlay);
    overlayClose.addEventListener("click", closeOverlay);
    overlay.addEventListener("click", (e)=>{ if(e.target === overlay) closeOverlay(); });
    document.addEventListener("keydown",(e)=>{ if(e.key==="Escape") closeOverlay(); });

    overlayInput.addEventListener("input", ()=> renderSuggest(overlayInput.value));

    // Popular list
    const productLinks = products.reduce((acc,p)=>{ acc[p.name]={url:`shop.html#${p.id}`}; return acc; },{});

    function getClickCounts(){
      try{
        const raw = localStorage.getItem("hm_clicks_v1");
        return raw ? JSON.parse(raw) : {};
      }catch(e){ return {}; }
    }
    function renderPopular(){
      const host = document.getElementById("popularList");
      const counts = getClickCounts();

      const items = Object.keys(productLinks).map(name => ({
        name,
        count: counts[name] || 0,
        url: productLinks[name].url
      })).sort((a,b) => b.count - a.count);

      const top = items.filter(i => i.count > 0).slice(0, 6);

      if (top.length === 0){
        host.innerHTML = `<div class="cta-row"><a class="cta" href="shop.html">Noch keine Klicks ‚Üí Shop √∂ffnen</a></div>`;
        return;
      }

      host.innerHTML = top.map(i => `
        <div style="margin-top:10px;">
          <a class="cta" href="${i.url}">${i.name} (${i.count} Klicks)</a>
        </div>
      `).join("");
    }
    renderPopular();

    // Share: single icon -> native share or menu
    const shareBtn = document.getElementById("shareBtn");
    const shareMenu = document.getElementById("shareMenu");
    const shareBackdrop = document.getElementById("shareBackdrop");
    const shareNative = document.getElementById("shareNative");
    const shareWhats = document.getElementById("shareWhats");
    const shareCopy = document.getElementById("shareCopy");
    const shareClose = document.getElementById("shareClose");

    function openShareMenu(){
      shareMenu.classList.add("open");
      shareMenu.setAttribute("aria-hidden","false");
      track("share_menu_open","home");
    }
    function closeShareMenu(){
      shareMenu.classList.remove("open");
      shareMenu.setAttribute("aria-hidden","true");
      track("share_menu_close","home");
    }

    async function doNativeShare(){
      const url = window.location.href;
      if (navigator.share){
        try{
          await navigator.share({ title: document.title, text: "Schau dir das mal an:", url });
          track("share","native");
        }catch(e){}
      } else {
        openShareMenu();
      }
    }

    shareBtn.addEventListener("click", async ()=>{
      // if native share available: use it directly like iOS
      if (navigator.share){
        await doNativeShare();
      } else {
        openShareMenu();
      }
    });

    shareBackdrop.addEventListener("click", closeShareMenu);
    shareClose.addEventListener("click", closeShareMenu);
    shareNative.addEventListener("click", async ()=>{ closeShareMenu(); await doNativeShare(); });

    shareWhats.addEventListener("click", ()=>{
      const url = window.location.href;
      window.open(`https://wa.me/?text=${encodeURIComponent(url)}`, "_blank");
      track("share","whatsapp");
      closeShareMenu();
    });

    shareCopy.addEventListener("click", async ()=>{
      await navigator.clipboard.writeText(window.location.href);
      alert("Link kopiert");
      track("share","copy");
      closeShareMenu();
    });
  </script>
</body>
</html>