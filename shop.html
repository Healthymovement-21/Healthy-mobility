<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Shop ‚Äì Produktempfehlungen</title>

  <style>
    *{ box-sizing:border-box; }

    :root{
      --ig: linear-gradient(45deg,#feda75,#fa7e1e,#d62976,#962fbf,#4f5bd5);

      /* Dark */
      --bg:#000;
      --text:#fff;
      --muted:#d7d7d7;
      --card:#0f0f10;
      --nav:#bbb;
      --line: rgba(255,255,255,0.10);
    }

    [data-theme="light"]{
      --bg:#ffffff;
      --text:#111;
      --muted:#333;
      --card:#f2f3f5;
      --nav:#444;
      --line: rgba(0,0,0,0.10);
    }

    html,body{
      margin:0; padding:0;
      background:var(--bg);
      color:var(--text);
      font-family:-apple-system,BlinkMacSystemFont,"Helvetica Neue",Arial,sans-serif;
      overflow-x:hidden;
    }

    .wrap{
      max-width:980px;
      margin:0 auto;
      padding:22px 16px; /* mehr Rand links/rechts */
    }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
      padding: 10px 0 18px;
    }

    nav{
      display:flex;
      justify-content:center;
      align-items:center;
      gap:26px;
    }

    nav a{
      color:var(--nav);
      text-decoration:none;
      font-weight:800;
      white-space:nowrap;
    }

    nav a.active{
      color:var(--text);
      border-bottom:2px solid;
      border-image:var(--ig) 1;
      padding-bottom:6px;
    }

    .switch{
      position:absolute;
      right:0;
      top:50%;
      transform:translateY(-50%);
    }

    .switch button{
      border:0;
      padding:10px 12px;
      border-radius:999px;
      font-weight:900;
      cursor:pointer;
      color: var(--text);
      background: transparent;
      outline: 1px solid var(--line);
    }

    .topnote{
      color:var(--muted);
      margin: 0 0 14px;
      line-height:1.6;
    }

    /* 2 Spalten */
    .product-grid{
      display:grid;
      grid-template-columns:repeat(2, minmax(0,1fr));
      gap:18px;
      padding-top:6px;
    }

    @media (max-width:760px){
      .product-grid{ grid-template-columns:1fr; }
    }

    /* Cards: SOFORT sichtbar (keine Verz√∂gerung) */
    .product{
      position:relative;
      background:var(--card);
      border-radius:18px;
      padding:20px;
      overflow:hidden;
      opacity: 1;
      transform: translateY(0);
      transition: opacity .28s ease, transform .28s ease, box-shadow .35s ease;
    }

    /* Instagram-Gradient-Frame */
    .product::before{
      content:"";
      position:absolute;
      inset:0;
      padding:1.5px;
      border-radius:18px;
      background:var(--ig);
      -webkit-mask:
        linear-gradient(#000 0 0) content-box,
        linear-gradient(#000 0 0);
      -webkit-mask-composite:xor;
      mask-composite:exclude;
      pointer-events:none;
      opacity:.95;
    }

    /* Animation wird erst nach JS aktiv (damit nichts ‚Äúleer‚Äù erscheint) */
    body.scroll-anim .product{
      opacity:0;
      transform:translateY(16px);
      box-shadow:none;
    }
    body.scroll-anim .product.active{
      opacity:1;
      transform:translateY(0);
      box-shadow:
        0 0 22px rgba(214,41,118,0.35),
        0 0 44px rgba(252,175,69,0.18);
    }

    .product h3{
      margin:0 0 10px;
      font-size:1.06rem;
      letter-spacing:-0.01em;
    }

    .product p{
      margin:0 0 12px;
      color:var(--muted);
      line-height:1.6;
    }

    .price{
      display:block;
      margin:10px 0 12px;
      font-weight:900;
      color:var(--text);
    }

    .btn{
      display:inline-block;
      padding:10px 14px;
      border-radius:999px;
      text-decoration:none;
      font-weight:900;
      color:#fff;
      background:var(--ig);
      box-shadow:0 0 18px rgba(214,41,118,0.25);
    }

    /* ========= NUR HINZUGEF√úGT: FILTER (CSS ADD-ON) ========= */
    .filterbar{
      display:flex;
      justify-content:flex-end;
      margin: 6px 0 14px;
      position: relative;
    }

    .filter-pill{
      padding:10px 14px;
      border-radius:999px;
      border:0;
      cursor:pointer;
      font-weight:900;
      color:#fff;
      background:var(--ig);
      box-shadow:0 0 18px rgba(214,41,118,0.18);
    }

    .filter-panel{
      position:absolute;
      right:0;
      top:48px;
      width:min(360px, 92vw);
      background:var(--card);
      border-radius:16px;
      padding:14px;
      overflow:hidden;
      z-index:50;
    }

    .filter-panel::before{
      content:"";
      position:absolute;
      inset:0;
      padding:1.5px;
      border-radius:16px;
      background:var(--ig);
      -webkit-mask:
        linear-gradient(#000 0 0) content-box,
        linear-gradient(#000 0 0);
      -webkit-mask-composite:xor;
      mask-composite:exclude;
      pointer-events:none;
      opacity:.65;
    }

    .filter-row{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      position:relative;
      z-index:1;
    }

    .filter-label{
      display:flex;
      flex-direction:column;
      gap:6px;
      flex:1 1 160px;
      min-width:140px;
    }

    .filter-label span{
      color:var(--muted);
      font-weight:800;
      font-size:0.9rem;
    }

    .filter-label select,
    .filter-label input{
      width:100%;
      padding:10px 12px;
      border-radius:12px;
      background:transparent;
      color:var(--text);
      border:1px solid var(--line);
      outline:none;
    }

    .filter-actions{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
      margin-top:10px;
      position:relative;
      z-index:1;
    }

    .filter-apply,
    .filter-reset{
      padding:10px 14px;
      border-radius:999px;
      border:0;
      cursor:pointer;
      font-weight:900;
      color:#fff;
      background:var(--ig);
      box-shadow:0 0 18px rgba(214,41,118,0.18);
    }

    .filter-reset{
      background:transparent;
      color:var(--text);
      outline:1px solid var(--line);
      box-shadow:none;
    }

    .filter-info{
      color:var(--muted);
      font-weight:800;
      margin-left:auto;
    }
    /* ========= /FILTER (CSS ADD-ON) ========= */
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <nav>
        <a href="index.html">Home</a>
        <a href="shop.html" class="active">Shop</a>
      </nav>

      <div class="switch">
        <button id="themeBtn" type="button">üåó</button>
      </div>
    </div>

    <p class="topnote">Hinweis: Die Links sind Affiliate-Links. F√ºr dich entstehen keine Mehrkosten.</p>

    <!-- ========= NUR HINZUGEF√úGT: FILTER (HTML ADD-ON) ========= -->
    <div class="filterbar">
      <button id="filterToggle" class="filter-pill" type="button" aria-expanded="false">Filter ‚ñæ</button>

      <div id="filterPanel" class="filter-panel" hidden>
        <div class="filter-row">
          <label class="filter-label">
            <span>Sortierung</span>
            <select id="sortSelect">
              <option value="default">Standard</option>
              <option value="price-asc">Preis: niedrig ‚Üí hoch</option>
              <option value="price-desc">Preis: hoch ‚Üí niedrig</option>
              <option value="az">Alphabet: A ‚Üí Z</option>
              <option value="za">Alphabet: Z ‚Üí A</option>
            </select>
          </label>
        </div>

        <div class="filter-row" style="margin-top:10px;">
          <label class="filter-label">
            <span>Preis von (‚Ç¨)</span>
            <input id="minPrice" type="number" inputmode="decimal" placeholder="z.B. 10" min="0" step="0.01">
          </label>

          <label class="filter-label">
            <span>bis (‚Ç¨)</span>
            <input id="maxPrice" type="number" inputmode="decimal" placeholder="z.B. 50" min="0" step="0.01">
          </label>
        </div>

        <div class="filter-actions">
          <button id="applyFilters" class="filter-apply" type="button">Anwenden</button>
          <button id="resetFilters" class="filter-reset" type="button">Reset</button>
          <div id="filterInfo" class="filter-info"></div>
        </div>
      </div>
    </div>
    <!-- ========= /FILTER (HTML ADD-ON) ========= -->

    <section class="product-grid">

      <div class="product">
        <h3>Massagepistole</h3>
        <p>Zur Lockerung verspannter Muskulatur, z. B. nach sportlicher Belastung oder bei muskul√§ren Verspannungen durch Alltag oder Beruf.</p>
        <span class="price">25,99 ‚Ç¨</span>
        <a class="btn" href="https://amzn.to/45QvJM2" target="_blank" rel="noopener">Bei Amazon ansehen</a>
      </div>

      <div class="product">
        <h3>Moorkissen</h3>
        <p>Zur lokalen W√§rmeanwendung im Bereich R√ºcken, Nacken oder Schulter. W√§rme kann entspannend wirken und die Durchblutung f√∂rdern.</p>
        <span class="price">29,89 ‚Ç¨</span>
        <a class="btn" href="https://amzn.to/4cgzQ7V" target="_blank" rel="noopener">Bei Amazon ansehen</a>
      </div>

      <div class="product">
        <h3>Knie-K√ºhlpack</h3>
        <p>Zur K√ºhlung bei akuten Reizzust√§nden oder nach Belastung. Anwendung individuell und zeitlich begrenzt.</p>
        <span class="price">17,89 ‚Ç¨</span>
        <a class="btn" href="https://amzn.to/4qjoAuL" target="_blank" rel="noopener">Bei Amazon ansehen</a>
      </div>

      <div class="product">
        <h3>Retterspitz</h3>
        <p>√Ñu√üerlich anwendbar als unterst√ºtzende Ma√ünahme bei gereizten oder entz√ºndlichen Strukturen.</p>
        <span class="price">26,14 ‚Ç¨</span>
        <a class="btn" href="https://amzn.to/3ZnEwRS" target="_blank" rel="noopener">Bei Amazon ansehen</a>
      </div>

      <div class="product">
        <h3>MacDavid Bandage</h3>
        <p>Zur Unterst√ºtzung und Stabilisierung von Gelenken bei sportlicher oder allt√§glicher Belastung.</p>
        <span class="price">44,95 ‚Ç¨</span>
        <a class="btn" href="https://amzn.to/4tvfiin" target="_blank" rel="noopener">Bei Amazon ansehen</a>
      </div>

      <div class="product">
        <h3>Leukotape</h3>
        <p>Zur funktionellen Unterst√ºtzung von Gelenken oder zur gezielten Bewegungsf√ºhrung.</p>
        <span class="price">9,99 ‚Ç¨</span>
        <a class="btn" href="https://amzn.to/4kplTGW" target="_blank" rel="noopener">Bei Amazon ansehen</a>
      </div>

      <div class="product">
        <h3>Laufband</h3>
        <p>F√ºr moderates Ausdauertraining zu Hause, wetterunabh√§ngig oder bei eingeschr√§nkter Mobilit√§t.</p>
        <span class="price">94,99 ‚Ç¨</span>
        <a class="btn" href="https://amzn.to/3O9os3F" target="_blank" rel="noopener">Bei Amazon ansehen</a>
      </div>

      <div class="product">
        <h3>Thrombosestrumpf</h3>
        <p>Zur Unterst√ºtzung des ven√∂sen R√ºckflusses bei l√§ngeren Ruhephasen oder eingeschr√§nkter Mobilit√§t.</p>
        <span class="price">26,90 ‚Ç¨</span>
        <a class="btn" href="https://amzn.to/4r3NY91" target="_blank" rel="noopener">Bei Amazon ansehen</a>
      </div>

      <div class="product">
        <h3>W√§rmemessger√§t</h3>
        <p>Zur objektiveren Einsch√§tzung von Temperaturunterschieden, z. B. im Verlauf nach Belastung.</p>
        <span class="price">16,14 ‚Ç¨</span>
        <a class="btn" href="https://amzn.to/4a6vNtq" target="_blank" rel="noopener">Bei Amazon ansehen</a>
      </div>

      <div class="product">
        <h3>Aloe-Vera-Gel</h3>
        <p>Zur √§u√üerlichen Hautpflege, insbesondere nach thermischen Anwendungen oder bei sensibler Haut.</p>
        <span class="price">6,30 ‚Ç¨</span>
        <a class="btn" href="https://amzn.to/4rftMB6" target="_blank" rel="noopener">Bei Amazon ansehen</a>
      </div>

      <div class="product">
        <h3>Lymphma√üband</h3>
        <p>Zur Verlaufskontrolle von Umfangsver√§nderungen bei Schwellungen oder √ñdemen.</p>
        <span class="price">20,09 ‚Ç¨</span>
        <a class="btn" href="https://amzn.to/3MvIhSn" target="_blank" rel="noopener">Bei Amazon ansehen</a>
      </div>

      <div class="product">
        <h3>Elektrischer Shaker</h3>
        <p>Zur unkomplizierten Zubereitung von Getr√§nken oder Nahrungserg√§nzungen im Alltag.</p>
        <span class="price">19,54 ‚Ç¨</span>
        <a class="btn" href="https://amzn.to/3MhQ1HB" target="_blank" rel="noopener">Bei Amazon ansehen</a>
      </div>

      <div class="product">
        <h3>BAUERFEIND Fu√übandage</h3>
        <p>Zur Stabilisierung und Entlastung des Fu√ües bei Belastung im Alltag oder Sport.</p>
        <span class="price">47,43 ‚Ç¨</span>
        <a class="btn" href="https://amzn.to/3MchKJM" target="_blank" rel="noopener">Bei Amazon ansehen</a>
      </div>

      <div class="product">
        <h3>BAUERFEIND Armbandage</h3>
        <p>Zur Unterst√ºtzung des Ellenbogens bei Belastung oder √úberlastung.</p>
        <span class="price">35,20 ‚Ç¨</span>
        <a class="btn" href="https://amzn.to/4alA3nI" target="_blank" rel="noopener">Bei Amazon ansehen</a>
      </div>

    </section>
  </div>

  <script>
    // Theme (speichert Einstellung)
    const root = document.documentElement;
    const btn = document.getElementById("themeBtn");

    const saved = localStorage.getItem("theme");
    if (saved) {
      root.setAttribute("data-theme", saved);
    } else {
      const prefersLight = window.matchMedia && window.matchMedia("(prefers-color-scheme: light)").matches;
      root.setAttribute("data-theme", prefersLight ? "light" : "dark");
    }

    btn.addEventListener("click", () => {
      const current = root.getAttribute("data-theme") || "dark";
      const next = current === "dark" ? "light" : "dark";
      root.setAttribute("data-theme", next);
      localStorage.setItem("theme", next);
    });

    // Scroll Animation: sofort aktiv, aber ohne "leeren" Start
    const items = document.querySelectorAll(".product");

    function checkVisibility(){
      const triggerTop = window.innerHeight * 0.92;
      items.forEach(el => {
        const top = el.getBoundingClientRect().top;
        const bottom = el.getBoundingClientRect().bottom;
        const inView = (top < triggerTop) && (bottom > 0);
        if (inView) el.classList.add("active");
        else el.classList.remove("active");
      });
    }

    // Sofort initial anzeigen (keine Verz√∂gerung)
    checkVisibility();

    // Dann Animation einschalten + erneut checken
    requestAnimationFrame(() => {
      document.body.classList.add("scroll-anim");
      checkVisibility();
    });

    window.addEventListener("scroll", checkVisibility, { passive:true });
    window.addEventListener("resize", checkVisibility);

    /* ========= NUR HINZUGEF√úGT: FILTER (JS ADD-ON) ========= */
    (function(){
      const grid = document.querySelector(".product-grid");
      const panel = document.getElementById("filterPanel");
      const toggle = document.getElementById("filterToggle");
      const sortSelect = document.getElementById("sortSelect");
      const minPrice = document.getElementById("minPrice");
      const maxPrice = document.getElementById("maxPrice");
      const applyBtn = document.getElementById("applyFilters");
      const resetBtn = document.getElementById("resetFilters");
      const info = document.getElementById("filterInfo");

      if(!grid || !panel || !toggle || !sortSelect || !minPrice || !maxPrice || !applyBtn || !resetBtn) return;

      // Original-Reihenfolge merken
      const original = Array.from(grid.querySelectorAll(".product")).map((el, idx) => ({ el, idx }));

      function parsePrice(el){
        const priceEl = el.querySelector(".price");
        if(!priceEl) return NaN;
        const raw = priceEl.textContent.replace(/\s/g,"").replace("‚Ç¨","").replace(",",".");
        const val = parseFloat(raw);
        return Number.isFinite(val) ? val : NaN;
      }

      function getTitle(el){
        const h = el.querySelector("h3");
        return (h ? h.textContent : "").trim().toLowerCase();
      }

      function setVisible(el, yes){
        el.style.display = yes ? "" : "none";
      }

      function updateInfo(){
        const visibleCount = original.filter(({el}) => el.style.display !== "none").length;
        info.textContent = `${visibleCount} / ${original.length}`;
      }

      function applyFilter(){
        const min = minPrice.value ? parseFloat(minPrice.value) : -Infinity;
        const max = maxPrice.value ? parseFloat(maxPrice.value) : Infinity;

        original.forEach(({el}) => {
          const p = parsePrice(el);
          const ok = Number.isFinite(p) ? (p >= min && p <= max) : true;
          setVisible(el, ok);
        });

        updateInfo();
      }

      function applySort(){
        const mode = sortSelect.value;

        const visible = original.filter(({el}) => el.style.display !== "none");
        const hidden  = original.filter(({el}) => el.style.display === "none");

        let sorted = visible.slice();

        if(mode === "default"){
          sorted.sort((a,b) => a.idx - b.idx);
        } else if(mode === "price-asc"){
          sorted.sort((a,b) => parsePrice(a.el) - parsePrice(b.el));
        } else if(mode === "price-desc"){
          sorted.sort((a,b) => parsePrice(b.el) - parsePrice(a.el));
        } else if(mode === "az"){
          sorted.sort((a,b) => getTitle(a.el).localeCompare(getTitle(b.el), "de"));
        } else if(mode === "za"){
          sorted.sort((a,b) => getTitle(b.el).localeCompare(getTitle(a.el), "de"));
        }

        [...sorted, ...hidden].forEach(({el}) => grid.appendChild(el));

        // Animation nach Sortierung sauber neu bewerten
        checkVisibility();
      }

      function applyAll(){
        applyFilter();
        applySort();
        checkVisibility();
      }

      // Panel auf/zu
      toggle.addEventListener("click", () => {
        const isHidden = panel.hasAttribute("hidden");
        if(isHidden){
          panel.removeAttribute("hidden");
          toggle.setAttribute("aria-expanded", "true");
        } else {
          panel.setAttribute("hidden", "");
          toggle.setAttribute("aria-expanded", "false");
        }
      });

      // Klick au√üerhalb -> Panel schlie√üen
      document.addEventListener("click", (e) => {
        if(panel.hasAttribute("hidden")) return;
        const within = panel.contains(e.target) || toggle.contains(e.target);
        if(!within){
          panel.setAttribute("hidden", "");
          toggle.setAttribute("aria-expanded", "false");
        }
      });

      applyBtn.addEventListener("click", applyAll);
      sortSelect.addEventListener("change", applySort);

      resetBtn.addEventListener("click", () => {
        minPrice.value = "";
        maxPrice.value = "";
        sortSelect.value = "default";
        original.forEach(({el}) => setVisible(el, true));
        original.sort((a,b) => a.idx - b.idx).forEach(({el}) => grid.appendChild(el));
        updateInfo();
        checkVisibility();
      });

      updateInfo();
    })();
    /* ========= /FILTER (JS ADD-ON) ========= */
  </script>
</body>
</html>