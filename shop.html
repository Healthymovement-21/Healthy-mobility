<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Shop ‚Äì Produktempfehlungen</title>

  <style>
    *{ box-sizing:border-box; }

    :root{
      --ig: linear-gradient(45deg,#feda75,#fa7e1e,#d62976,#962fbf,#4f5bd5);

      --bg:#000;
      --text:#fff;
      --muted:#d7d7d7;
      --card:#0f0f10;
      --nav:#bbb;
      --line: rgba(255,255,255,0.10);
    }

    [data-theme="light"]{
      --bg:#ffffff;
      --text:#111;
      --muted:#333;
      --card:#f2f3f5;
      --nav:#444;
      --line: rgba(0,0,0,0.10);
    }

    html,body{
      margin:0; padding:0;
      background:var(--bg);
      color:var(--text);
      font-family:-apple-system,BlinkMacSystemFont,"Helvetica Neue",Arial,sans-serif;
      overflow-x:hidden;
      font-size: 14px; /* Text etwas kleiner */
    }

    .wrap{
      max-width:980px;
      margin:0 auto;
      padding:34px 24px;
    }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
      margin-bottom: 10px;
    }

    .nav-left a{
      color:var(--nav);
      text-decoration:none;
      font-weight:800;
      white-space:nowrap;
      padding: 8px 10px;
      border-radius: 10px;
      outline: 1px solid transparent;
    }
    .nav-left a:hover{ outline: 1px solid var(--line); }

    .right-controls{
      display:flex;
      align-items:center;
      gap:10px;
      position:relative;
    }

    /* Shop dropdown (Farben abgedunkelt: weniger Glow/Opacity) */
    .shop-pill{
      height:44px;
      padding:0 12px;
      border-radius:999px;
      border:0;
      cursor:pointer;
      font-weight:900;
      color:#fff;
      background:var(--ig);
      box-shadow:0 0 10px rgba(214,41,118,0.06); /* dunkler/dezenter */
      display:flex;
      align-items:center;
      gap:8px;
      white-space:nowrap;
    }

    .menu-panel{
      position:absolute;
      right:0;
      top:52px;
      width: min(220px, 80vw);
      background:var(--card);
      border-radius:14px;
      padding:10px;
      overflow:hidden;
      z-index:60;
    }
    .menu-panel::before{
      content:"";
      position:absolute;
      inset:0;
      padding:1.5px;
      border-radius:14px;
      background:var(--ig);
      -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask-composite:xor;
      mask-composite:exclude;
      pointer-events:none;
      opacity:.22; /* dunkler */
    }

    .menu-panel button{
      width:100%;
      border:0;
      background:transparent;
      color:var(--text);
      text-align:left;
      padding:10px 10px;
      border-radius:10px;
      cursor:pointer;
      font-weight:900;
      position:relative;
      z-index:1;
    }
    .menu-panel button:hover{ outline:1px solid var(--line); }
    .menu-panel button.active{
      background: rgba(255,255,255,0.03);
      box-shadow: 0 0 8px rgba(214,41,118,0.06); /* dunkler */
    }

    /* Theme */
    .theme-btn{
      border:0;
      padding:10px 12px;
      border-radius:999px;
      font-weight:900;
      cursor:pointer;
      color: var(--text);
      background: transparent;
      outline: 1px solid var(--line);
      height:44px;
    }

    /* Suche + Filter als EINHEITLICHER Block */
    .search-row{
      display:flex;
      align-items:stretch;
      margin: 12px 0 22px; /* mehr Luft zum Grid */
    }

    .search-group{
      display:flex;
      align-items:stretch;
      width:100%;
      border:1px solid var(--line);
      border-radius:14px;
      overflow:hidden;
      background: transparent;
    }

    /* Fieldset optisch neutral, Legend bleibt */
    fieldset.searchbox{
      flex: 1 1 auto;
      border:0;
      padding:8px 10px 10px;  /* Suchleiste kleiner */
      margin:0;
      min-width: 0;
    }
    fieldset.searchbox legend{
      padding:0 8px;
      color:var(--muted);
      font-weight:900;
      font-size:0.8rem; /* kleiner */
    }
    .searchbox input{
      width:100%;
      border:0;
      outline:none;
      background:transparent;
      color:var(--text);
      font-weight:800;
      font-size:0.9rem; /* kleiner */
      padding:6px 2px;  /* kleiner */
    }

    /* Filter Button = Sofort-Umschalter (kein Popup) */
    .sort-btn{
      flex: 0 0 auto;
      border:0;
      width:48px;
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      color:#fff;
      font-weight:900;
      background:var(--ig);
      box-shadow: inset 0 0 0 999px rgba(0,0,0,0.18); /* abgedunkelt */
    }

    .sort-btn:active{
      transform: translateY(1px);
    }

    /* kleine Anzeige neben Button (optional, sehr dezent) */
    .sort-indicator{
      flex: 0 0 auto;
      display:flex;
      align-items:center;
      padding:0 10px;
      color:var(--muted);
      font-weight:900;
      font-size:0.82rem;
      border-left:1px solid var(--line);
      white-space:nowrap;
    }

    /* Grid + cards */
    .product-grid{
      display:grid;
      grid-template-columns:repeat(2, minmax(0,1fr));
      gap:24px;              /* mehr Abstand untereinander */
      padding-top: 8px;      /* extra Luft nach Suchzeile */
    }
    @media (max-width:760px){
      .product-grid{ grid-template-columns:1fr; }
    }

    .product{
      position:relative;
      background:var(--card);
      border-radius:16px;
      padding:14px;
      overflow:hidden;

      opacity: 1;
      transform: translateY(0);
      transition: opacity .28s ease, transform .28s ease, box-shadow .35s ease;
    }

    .product::before{
      content:"";
      position:absolute;
      inset:0;
      padding:1.5px;
      border-radius:16px;
      background:var(--ig);
      -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask-composite:xor;
      mask-composite:exclude;
      pointer-events:none;
      opacity:.60; /* weniger knallig */
    }

    body.scroll-anim .product{
      opacity:0;
      transform:translateY(12px);
      box-shadow:none;
    }
    body.scroll-anim .product.active{
      opacity:1;
      transform:translateY(0);
      box-shadow:
        0 0 8px rgba(214,41,118,0.10),
        0 0 14px rgba(252,175,69,0.05); /* dezenter */
    }

    .product h3{
      margin:0 0 6px;
      font-size:0.95rem; /* kleiner */
      letter-spacing:-0.01em;
    }
    .product p{
      margin:0 0 8px;
      color:var(--muted);
      line-height:1.5;
      font-size:0.9rem; /* kleiner */
    }
    .price{
      display:block;
      margin:8px 0 10px;
      font-weight:900;
      color:var(--text);
      font-size:0.93rem;
    }
    .btn{
      display:inline-block;
      padding:8px 11px;
      border-radius:999px;
      text-decoration:none;
      font-weight:900;
      color:#fff;
      background:var(--ig);
      box-shadow:0 0 8px rgba(214,41,118,0.08); /* dunkler */
      font-size:0.88rem;
    }

    .footnote{
      margin-top: 18px;
      color: var(--muted);
      font-size: 0.88rem;
      line-height: 1.5;
      text-align: center;
      opacity: 0.9;
    }
  </style>
</head>

<body>
  <div class="wrap">

    <div class="topbar">
      <div class="nav-left">
        <a href="index.html">Home</a>
      </div>

      <div class="right-controls">
        <button id="shopMenuToggle" class="shop-pill" type="button" aria-expanded="false" aria-label="Kategorien √∂ffnen">
          Shop <span id="shopCaret">‚ñæ</span>
        </button>

        <div id="shopMenu" class="menu-panel" hidden>
          <button type="button" class="cat-item active" data-cat="all">Alle</button>
          <button type="button" class="cat-item" data-cat="sport">Sport</button>
          <button type="button" class="cat-item" data-cat="regeneration">Regeneration</button>
          <button type="button" class="cat-item" data-cat="reha">Reha</button>
        </div>

        <button id="themeBtn" class="theme-btn" type="button">üåó</button>
      </div>
    </div>

    <!-- Suche + Sofort-Sort Button (verbunden) -->
    <div class="search-row">
      <div class="search-group">
        <fieldset class="searchbox">
          <legend>Suche</legend>
          <input id="searchInput" type="search" placeholder="Produkt suchen‚Ä¶" autocomplete="off">
        </fieldset>

        <button id="sortToggle" class="sort-btn" type="button" aria-label="Sortierung umschalten" title="Sortierung umschalten">
          ‚áÖ
        </button>

        <div id="sortIndicator" class="sort-indicator">billig ‚Üí teuer</div>
      </div>
    </div>

    <section class="product-grid">

      <div class="product" data-cats="regeneration">
        <h3>Massagepistole</h3>
        <p>Zur Lockerung verspannter Muskulatur, z. B. nach sportlicher Belastung oder bei muskul√§ren Verspannungen durch Alltag oder Beruf.</p>
        <span class="price">25,99 ‚Ç¨</span>
        <a class="btn" href="https://amzn.to/45QvJM2" target="_blank" rel="noopener">Bei Amazon ansehen</a>
      </div>

      <div class="product" data-cats="regeneration">
        <h3>Moorkissen</h3>
        <p>Zur lokalen W√§rmeanwendung im Bereich R√ºcken, Nacken oder Schulter. W√§rme kann entspannend wirken und die Durchblutung f√∂rdern.</p>
        <span class="price">29,89 ‚Ç¨</span>
        <a class="btn" href="https://amzn.to/4cgzQ7V" target="_blank" rel="noopener">Bei Amazon ansehen</a>
      </div>

      <div class="product" data-cats="regeneration reha">
        <h3>Knie-K√ºhlpack</h3>
        <p>Zur K√ºhlung bei akuten Reizzust√§nden oder nach Belastung. Anwendung individuell und zeitlich begrenzt.</p>
        <span class="price">17,89 ‚Ç¨</span>
        <a class="btn" href="https://amzn.to/4qjoAuL" target="_blank" rel="noopener">Bei Amazon ansehen</a>
      </div>

      <div class="product" data-cats="sport regeneration reha">
        <h3>Retterspitz</h3>
        <p>√Ñu√üerlich anwendbar als unterst√ºtzende Ma√ünahme bei gereizten oder entz√ºndlichen Strukturen.</p>
        <span class="price">26,14 ‚Ç¨</span>
        <a class="btn" href="https://amzn.to/3ZnEwRS" target="_blank" rel="noopener">Bei Amazon ansehen</a>
      </div>

      <div class="product" data-cats="sport">
        <h3>MacDavid Bandage</h3>
        <p>Zur Unterst√ºtzung und Stabilisierung von Gelenken bei sportlicher oder allt√§glicher Belastung.</p>
        <span class="price">44,95 ‚Ç¨</span>
        <a class="btn" href="https://amzn.to/4tvfiin" target="_blank" rel="noopener">Bei Amazon ansehen</a>
      </div>

      <div class="product" data-cats="sport">
        <h3>Leukotape</h3>
        <p>Zur funktionellen Unterst√ºtzung von Gelenken oder zur gezielten Bewegungsf√ºhrung.</p>
        <span class="price">9,99 ‚Ç¨</span>
        <a class="btn" href="https://amzn.to/4kplTGW" target="_blank" rel="noopener">Bei Amazon ansehen</a>
      </div>

      <div class="product" data-cats="sport regeneration reha">
        <h3>Laufband</h3>
        <p>F√ºr moderates Ausdauertraining zu Hause, wetterunabh√§ngig oder bei eingeschr√§nkter Mobilit√§t.</p>
        <span class="price">94,99 ‚Ç¨</span>
        <a class="btn" href="https://amzn.to/3O9os3F" target="_blank" rel="noopener">Bei Amazon ansehen</a>
      </div>

      <div class="product" data-cats="sport regeneration reha">
        <h3>Thrombosestrumpf</h3>
        <p>Zur Unterst√ºtzung des ven√∂sen R√ºckflusses bei l√§ngeren Ruhephasen oder eingeschr√§nkter Bewegung.</p>
        <span class="price">26,90 ‚Ç¨</span>
        <a class="btn" href="https://amzn.to/4r3NY91" target="_blank" rel="noopener">Bei Amazon ansehen</a>
      </div>

      <div class="product" data-cats="reha">
        <h3>W√§rmemessger√§t</h3>
        <p>Zur objektiveren Einsch√§tzung von Temperaturunterschieden, z. B. im Verlauf nach Belastung.</p>
        <span class="price">16,14 ‚Ç¨</span>
        <a class="btn" href="https://amzn.to/4a6vNtq" target="_blank" rel="noopener">Bei Amazon ansehen</a>
      </div>

      <div class="product" data-cats="reha">
        <h3>Aloe-Vera-Gel</h3>
        <p>Zur √§u√üerlichen Hautpflege, insbesondere nach thermischen Anwendungen oder bei sensibler Haut.</p>
        <span class="price">6,30 ‚Ç¨</span>
        <a class="btn" href="https://amzn.to/4rftMB6" target="_blank" rel="noopener">Bei Amazon ansehen</a>
      </div>

      <div class="product" data-cats="reha">
        <h3>Lymphma√üband</h3>
        <p>Zur Verlaufskontrolle von Umfangsver√§nderungen bei Schwellungen oder √ñdemen.</p>
        <span class="price">20,09 ‚Ç¨</span>
        <a class="btn" href="https://amzn.to/3MvIhSn" target="_blank" rel="noopener">Bei Amazon ansehen</a>
      </div>

      <div class="product" data-cats="sport">
        <h3>Elektrischer Shaker</h3>
        <p>Zur unkomplizierten Zubereitung von Getr√§nken oder Nahrungserg√§nzungen im Alltag.</p>
        <span class="price">19,54 ‚Ç¨</span>
        <a class="btn" href="https://amzn.to/3MhQ1HB" target="_blank" rel="noopener">Bei Amazon ansehen</a>
      </div>

      <div class="product" data-cats="sport">
        <h3>BAUERFEIND Fu√übandage</h3>
        <p>Zur Stabilisierung und Entlastung des Fu√ües bei Belastung im Alltag oder Sport.</p>
        <span class="price">47,43 ‚Ç¨</span>
        <a class="btn" href="https://amzn.to/3MchKJM" target="_blank" rel="noopener">Bei Amazon ansehen</a>
      </div>

      <div class="product" data-cats="sport">
        <h3>BAUERFEIND Armbandage</h3>
        <p>Zur Unterst√ºtzung des Ellenbogens bei Belastung oder √úberlastung.</p>
        <span class="price">35,20 ‚Ç¨</span>
        <a class="btn" href="https://amzn.to/4alA3nI" target="_blank" rel="noopener">Bei Amazon ansehen</a>
      </div>

    </section>

    <div class="footnote">
      Hinweis: Die Links auf dieser Website sind Affiliate-Links. F√ºr dich entstehen keine zus√§tzlichen Kosten.
    </div>

  </div>

  <script>
    // Theme
    const root = document.documentElement;
    const themeBtn = document.getElementById("themeBtn");

    const saved = localStorage.getItem("theme");
    if (saved) root.setAttribute("data-theme", saved);
    else {
      const prefersLight = window.matchMedia && window.matchMedia("(prefers-color-scheme: light)").matches;
      root.setAttribute("data-theme", prefersLight ? "light" : "dark");
    }

    themeBtn.addEventListener("click", () => {
      const current = root.getAttribute("data-theme") || "dark";
      const next = current === "dark" ? "light" : "dark";
      root.setAttribute("data-theme", next);
      localStorage.setItem("theme", next);
    });

    // Scroll Animation
    const items = document.querySelectorAll(".product");
    function checkVisibility(){
      const triggerTop = window.innerHeight * 0.92;
      items.forEach(el => {
        if (el.style.display === "none") { el.classList.remove("active"); return; }
        const top = el.getBoundingClientRect().top;
        const bottom = el.getBoundingClientRect().bottom;
        const inView = (top < triggerTop) && (bottom > 0);
        if (inView) el.classList.add("active");
        else el.classList.remove("active");
      });
    }
    checkVisibility();
    requestAnimationFrame(() => {
      document.body.classList.add("scroll-anim");
      checkVisibility();
    });
    window.addEventListener("scroll", checkVisibility, { passive:true });
    window.addEventListener("resize", checkVisibility);

    // Shop Category dropdown
    const shopMenu = document.getElementById("shopMenu");
    const shopToggle = document.getElementById("shopMenuToggle");
    const shopCaret = document.getElementById("shopCaret");
    const catItems = document.querySelectorAll(".cat-item");
    let activeCat = "all";

    function closeShopMenu(){
      shopMenu.setAttribute("hidden","");
      shopToggle.setAttribute("aria-expanded","false");
      shopCaret.textContent = "‚ñæ";
    }
    function openShopMenu(){
      shopMenu.removeAttribute("hidden");
      shopToggle.setAttribute("aria-expanded","true");
      shopCaret.textContent = "‚ñ¥";
    }
    shopToggle.addEventListener("click", (e) => {
      e.stopPropagation();
      if (shopMenu.hasAttribute("hidden")) openShopMenu();
      else closeShopMenu();
    });

    document.addEventListener("click", () => {
      if (!shopMenu.hasAttribute("hidden")) closeShopMenu();
    });

    // Search
    const searchInput = document.getElementById("searchInput");
    let searchQuery = "";

    // Sorting toggle (sofort)
    const sortToggle = document.getElementById("sortToggle");
    const sortIndicator = document.getElementById("sortIndicator");
    let sortMode = "price-asc"; // default billig -> teuer

    const grid = document.querySelector(".product-grid");
    const original = Array.from(grid.querySelectorAll(".product")).map((el, idx) => ({ el, idx }));

    function parsePrice(el){
      const raw = el.querySelector(".price").textContent.replace(/\s/g,"").replace("‚Ç¨","").replace(",",".");
      const val = parseFloat(raw);
      return Number.isFinite(val) ? val : NaN;
    }

    function matchesSearch(el){
      if (!searchQuery) return true;
      const t = (el.textContent || "").toLowerCase();
      return t.includes(searchQuery);
    }

    function applyVisibility(){
      items.forEach(el => {
        const cats = (el.getAttribute("data-cats") || "").trim();
        const catOk = (activeCat === "all") ? true : cats.split(/\s+/).includes(activeCat);
        const searchOk = matchesSearch(el);
        el.style.display = (catOk && searchOk) ? "" : "none";
      });
    }

    function applyCategory(cat){
      activeCat = cat;
      catItems.forEach(b => b.classList.toggle("active", b.dataset.cat === cat));
      applyVisibility();
      applySort();
      checkVisibility();
    }

    catItems.forEach(btn => {
      btn.addEventListener("click", (e) => {
        e.stopPropagation();
        applyCategory(btn.dataset.cat);
        closeShopMenu();
      });
    });

    function applySort(){
      const visible = original.filter(({el}) => el.style.display !== "none");
      const hidden  = original.filter(({el}) => el.style.display === "none");

      let sorted = visible.slice();

      if (sortMode === "price-asc"){
        sorted.sort((a,b) => parsePrice(a.el) - parsePrice(b.el));
      } else if (sortMode === "price-desc"){
        sorted.sort((a,b) => parsePrice(b.el) - parsePrice(a.el));
      }

      [...sorted, ...hidden].forEach(({el}) => grid.appendChild(el));
      checkVisibility();
    }

    // Klick = sofort umschalten + sortieren (kein Popup)
    sortToggle.addEventListener("click", () => {
      sortMode = (sortMode === "price-asc") ? "price-desc" : "price-asc";
      sortIndicator.textContent = (sortMode === "price-asc") ? "billig ‚Üí teuer" : "teuer ‚Üí billig";
      applySort();
    });

    searchInput.addEventListener("input", () => {
      searchQuery = (searchInput.value || "").trim().toLowerCase();
      applyVisibility();
      applySort();
      checkVisibility();
    });

    // init
    applyVisibility();
    applySort();
    checkVisibility();
  </script>
</body>
</html>